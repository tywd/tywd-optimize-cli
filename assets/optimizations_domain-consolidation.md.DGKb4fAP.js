import{_ as s,c as i,o as n,ae as e}from"./chunks/framework.BQlYxExx.js";const k=JSON.parse('{"title":"合并域名数量优化指南","description":"","frontmatter":{},"headers":[],"relativePath":"optimizations/domain-consolidation.md","filePath":"optimizations/domain-consolidation.md"}'),l={name:"optimizations/domain-consolidation.md"};function t(p,a,h,o,c,r){return n(),i("div",null,[...a[0]||(a[0]=[e(`<h1 id="合并域名数量优化指南" tabindex="-1">合并域名数量优化指南 <a class="header-anchor" href="#合并域名数量优化指南" aria-label="Permalink to &quot;合并域名数量优化指南&quot;">​</a></h1><h2 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h2><p>静态资源域名数量过多，增加了DNS解析开销和TCP连接数，影响页面加载性能。</p><h2 id="优化建议" tabindex="-1">优化建议 <a class="header-anchor" href="#优化建议" aria-label="Permalink to &quot;优化建议&quot;">​</a></h2><h3 id="_1-域名合并原则" tabindex="-1">1. 域名合并原则 <a class="header-anchor" href="#_1-域名合并原则" aria-label="Permalink to &quot;1. 域名合并原则&quot;">​</a></h3><ul><li>静态资源域名控制在1-2个以内</li><li>避免为不同类型资源使用过多独立域名</li><li>合理利用域名分片技术</li></ul><h3 id="_2-实施方案" tabindex="-1">2. 实施方案 <a class="header-anchor" href="#_2-实施方案" aria-label="Permalink to &quot;2. 实施方案&quot;">​</a></h3><h4 id="方案一-统一cdn域名" tabindex="-1">方案一：统一CDN域名 <a class="header-anchor" href="#方案一-统一cdn域名" aria-label="Permalink to &quot;方案一：统一CDN域名&quot;">​</a></h4><p>将所有静态资源统一部署到一个CDN域名下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// 合并前</span></span>
<span class="line"><span>img.example.com</span></span>
<span class="line"><span>css.example.com</span></span>
<span class="line"><span>js.example.com</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 合并后</span></span>
<span class="line"><span>static.example.com</span></span></code></pre></div><h4 id="方案二-合理分片" tabindex="-1">方案二：合理分片 <a class="header-anchor" href="#方案二-合理分片" aria-label="Permalink to &quot;方案二：合理分片&quot;">​</a></h4><p>如果需要并行下载，可以使用2个域名：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>static1.example.com</span></span>
<span class="line"><span>static2.example.com</span></span></code></pre></div><h3 id="_3-webpack配置示例" tabindex="-1">3. Webpack配置示例 <a class="header-anchor" href="#_3-webpack配置示例" aria-label="Permalink to &quot;3. Webpack配置示例&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  output: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    publicPath: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;//static.example.com/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="_4-vite配置示例" tabindex="-1">4. Vite配置示例 <a class="header-anchor" href="#_4-vite配置示例" aria-label="Permalink to &quot;4. Vite配置示例&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    assetsDir: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;assets&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  base: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;//static.example.com/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="_5-注意事项" tabindex="-1">5. 注意事项 <a class="header-anchor" href="#_5-注意事项" aria-label="Permalink to &quot;5. 注意事项&quot;">​</a></h3><ul><li>避免超过3个静态资源域名</li><li>考虑HTTP/2的多路复用特性</li><li>评估域名合并对缓存策略的影响</li></ul><h3 id="_6-验证方法" tabindex="-1">6. 验证方法 <a class="header-anchor" href="#_6-验证方法" aria-label="Permalink to &quot;6. 验证方法&quot;">​</a></h3><ol><li>使用Chrome开发者工具Network面板</li><li>统计页面加载的域名数量</li><li>确认静态资源域名在合理范围内</li></ol><p>通过合理合并域名数量，可以有效减少DNS解析开销，提升页面加载性能。</p>`,22)])])}const E=s(l,[["render",t]]);export{k as __pageData,E as default};
